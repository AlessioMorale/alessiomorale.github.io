{"componentChunkName":"component---src-templates-blog-post-js","path":"/2017-11-01-setting-realsense-r200-odroid-xu4-ros/","result":{"data":{"site":{"siteMetadata":{"title":"A*Morale","author":"Alessio Morale","siteUrl":"https://blog.alessiomorale.com"}},"markdownRemark":{"id":"28e70f42-9f0a-5ee4-8e07-ea271a60fd4c","excerpt":"Update 1st may 2018: added a note to use realsense nodelet tag 1.8.1 and some patches to use ROS built from sources or GCC7. This post will guide you throughâ€¦","html":"<p><em>Update 1st may 2018: added a note to use realsense nodelet tag 1.8.1 and some patches to use ROS built from sources or GCC7.</em></p>\n<p>This post will guide you through the configuration of a Realsense R200 on Odroid XU4. There is nothing strictly related to this platform so they should apply to any armhf/x86 Ubuntu 16.04.xx systems.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/69c00ef17e72af93f9ec3e2edd47d444/55d41/DSC_0321.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin: 7vw 0; max-width: 1360px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAABAAF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAwAB/9oADAMBAAIQAxAAAAEjc5oKaVZf/8QAGhAAAwADAQAAAAAAAAAAAAAAAQIRAAMSE//aAAgBAQABBQL0IOja5Z9PDQ2xe7n/xAAXEQEAAwAAAAAAAAAAAAAAAAAAARES/9oACAEDAQE/Aall/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAS/9oACAECAQE/AVC23//EABwQAAICAgMAAAAAAAAAAAAAAAABESEDEiJxof/aAAgBAQAGPwLj6XrHRCyNIoSKUn//xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhUTFx/9oACAEBAAE/IREBnERH02l76IBFU12C4BL7pdn/2gAMAwEAAgADAAAAECMv/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERMf/aAAgBAwEBPxCjdwg//8QAGREAAgMBAAAAAAAAAAAAAAAAAAERIVHB/9oACAECAQE/EEChWbcP/8QAGhABAQADAQEAAAAAAAAAAAAAAREAITFxkf/aAAgBAQABPxBRwi0tfPMGEAmnfG7wlgMRSfchwAFu8ENVQ33Wds4Uhn//2Q=='); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/69c00ef17e72af93f9ec3e2edd47d444/51a8e/DSC_0321.webp 340w,\n/static/69c00ef17e72af93f9ec3e2edd47d444/713b7/DSC_0321.webp 680w,\n/static/69c00ef17e72af93f9ec3e2edd47d444/54376/DSC_0321.webp 1360w,\n/static/69c00ef17e72af93f9ec3e2edd47d444/0be89/DSC_0321.webp 2040w,\n/static/69c00ef17e72af93f9ec3e2edd47d444/71194/DSC_0321.webp 2720w,\n/static/69c00ef17e72af93f9ec3e2edd47d444/7e3e5/DSC_0321.webp 4618w\"\n          sizes=\"(max-width: 1360px) 100vw, 1360px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/69c00ef17e72af93f9ec3e2edd47d444/2e524/DSC_0321.jpg 340w,\n/static/69c00ef17e72af93f9ec3e2edd47d444/d330d/DSC_0321.jpg 680w,\n/static/69c00ef17e72af93f9ec3e2edd47d444/6c26c/DSC_0321.jpg 1360w,\n/static/69c00ef17e72af93f9ec3e2edd47d444/afd2d/DSC_0321.jpg 2040w,\n/static/69c00ef17e72af93f9ec3e2edd47d444/f4749/DSC_0321.jpg 2720w,\n/static/69c00ef17e72af93f9ec3e2edd47d444/55d41/DSC_0321.jpg 4618w\"\n          sizes=\"(max-width: 1360px) 100vw, 1360px\"\n          type=\"image/jpeg\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/69c00ef17e72af93f9ec3e2edd47d444/6c26c/DSC_0321.jpg\"\n          alt=\"DSC 0321\"\n          title=\"\"\n          src=\"/static/69c00ef17e72af93f9ec3e2edd47d444/6c26c/DSC_0321.jpg\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Letâ€™s start from the requirements:</p>\n<ul>\n<li>an Ubuntu 16.04.xx installation;</li>\n<li>ROS Kinetic (<a href=\"http://wiki.ros.org/kinetic/Installation/Ubuntu\">installation instructions</a>);</li>\n<li>obviously a Realsense R200 ðŸ™‚</li>\n</ul>\n<h3>Preparing the workspace</h3>\n<p>Skip this section if you have already a workspace.</p>\n<p>If donâ€™t, letâ€™s do it now (remember to â€˜source /opt/ros/kinetic/setup.bashâ€™ in case you have not added it to your .bashrc):</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> -p ros_ws/src\n<span class=\"token builtin class-name\">cd</span> ros_ws/src\ncatkin_init_workspace<span class=\"token operator\">&lt;</span>/pre<span class=\"token operator\">></span></code></pre></div>\n<h3>Prerequisites</h3>\n<p>Librealsense requires some prerequisites to be built:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> libusb-1.0-0-dev pkg-config libglfw3-dev</code></pre></div>\n<h3>Cloning the repositories</h3>\n<p>now itâ€™s time to clone the <a href=\"https://github.com/IntelRealSense/librealsense\">librealsense</a> and the <a href=\"https://github.com/intel-ros/realsense\">Realsense nodelet</a>Â repo:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">#librealsense</span>\n<span class=\"token function\">git</span> clone https://github.com/IntelRealSense/librealsense.git\n<span class=\"token builtin class-name\">cd</span> librealsense\n<span class=\"token function\">git</span> checkout v1.12.1\n<span class=\"token comment\">#setup udev rules. Connect or reconnect the camera the camera after the following two lines are executed</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">cp</span> config/99-realsense-libusb.rules /etc/udev/rules.d/\n<span class=\"token function\">sudo</span> udevadm control --reload-rules <span class=\"token operator\">&amp;&amp;</span> udevadm trigger</code></pre></div>\n<p>NOTE: if using ros built from source (and not installed under /opt/ros/* apply the following patch to librealsense:</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">diff --git a/CMakeLists.txt b/CMakeLists.txt\nindex d6ed86e1..784da760 100644\n<span class=\"token coord\">--- a/CMakeLists.txt</span>\n<span class=\"token coord\">+++ b/CMakeLists.txt</span>\n@@ -37,10 +37,8 @@ assign_version_property(PATCH)\n<span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span>set(REALSENSE_VERSION_STRING ${REALSENSE_VERSION_MAJOR}.${REALSENSE_VERSION_MINOR}.${REALSENSE_VERSION_PATCH})\n<span class=\"token prefix unchanged\"> </span>infoValue(REALSENSE_VERSION_STRING)\n</span>\n<span class=\"token deleted-sign deleted\"><span class=\"token prefix deleted\">-</span>IF(DEFINED CMAKE_PREFIX_PATH)\n<span class=\"token prefix deleted\">-</span>  IF(\"${CMAKE_PREFIX_PATH}\" MATCHES \"/opt/ros\")\n<span class=\"token prefix deleted\">-</span>    set(ROS_BUILD_TYPE TRUE)\n<span class=\"token prefix deleted\">-</span>  ENDIF()\n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span>IF(DEFINED CATKIN_DEVEL_PREFIX)\n<span class=\"token prefix inserted\">+</span>  set(ROS_BUILD_TYPE TRUE)\n</span><span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span>ENDIF()\n</span>\n<span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span>IF (${ROS_BUILD_TYPE})</span></code></pre></div>\n<p>Also if you are using gcc7 you probably need the next patch as well:</p>\n<p>librealsense_gcc7.diff:</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">diff --git a/src/types.h b/src/types.h\nindex 0455c836..ed3b818a 100644\n<span class=\"token coord\">--- a/src/types.h</span>\n<span class=\"token coord\">+++ b/src/types.h</span>\n<span class=\"token coord\">@@ -22,6 +22,7 @@</span>\n<span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span>#include &amp;lt;atomic&amp;gt;\n<span class=\"token prefix unchanged\"> </span>#include &amp;lt;map&amp;gt;\n<span class=\"token prefix unchanged\"> </span>#include &amp;lt;algorithm&amp;gt;\n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span>#include &amp;lt;functional&amp;gt;\n</span>\n<span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span>const uint8_t RS_STREAM_NATIVE_COUNT    = 5;\n<span class=\"token prefix unchanged\"> </span>const int RS_USER_QUEUE_SIZE = 20;</span></code></pre></div>\n<p>Please note that you need to use librealsense v1.12.1 and realsense 1.8.1 with R200 as the support was dropped in later versions.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">#realsense nodelet</span>\n<span class=\"token builtin class-name\">cd</span> <span class=\"token punctuation\">..</span>\n<span class=\"token function\">git</span> clone https://github.com/intel-ros/realsense.git\n<span class=\"token function\">git</span> checkout <span class=\"token number\">1.8</span>.1</code></pre></div>\n<h3>Building and testing</h3>\n<p>You may move to the root of your workspace (ros_ws) and build it:</p>\n<p><code class=\"language-text\">catkin_make -j4</code></p>\n<p>(j4 is required to prevent the compilation failures due to RAM constraints)</p>\n<p>In case of failure check whether it is asking for some dependencies (every distributionÂ  has always a slightly different set of packages preinstalled).</p>\n<p>Now you can test if everything is working fine.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">source</span> ./devel/setup.sh\n<span class=\"token comment\">#run the nodelet with default settings</span>\nroslaunch realsense_camera r200_nodelet_default.launch</code></pre></div>\n<p>Ensure to have ROS Kinetic installed on your pc and to configure properly the odroid XU4 netbios name inside your PC /etc/hosts file (all details for <a href=\"http://wiki.ros.org/ROS/NetworkSetup\">network setupÂ here</a>).</p>\n<p>then you can show the image topics from camera using:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\">ROS_MASTER_URI</span><span class=\"token operator\">=</span>http://192.168.2.15:11311 rqt</code></pre></div>\n<p>Change 192.168.2.15 with the IP of your embedded linux box(Odroid XU4).</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d24885c06765ba8a0a9908fc0b456e0d/710d1/Selection_033.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin: 7vw 0; max-width: 759px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 79.11764705882352%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsTAAALEwEAmpwYAAACiElEQVQoz3VSW08TQRReufUGNCSElBJCCGl4pRQkIC1U3qSaKC9GN3JRYtB4iYkxvhAa4MFfYNRoylUpb4L8Do0JKSJaudSipVqW2Z2Z3Xb92oJaQk/Ozp6ZOd93zncywv3RyXNX+i9cu+4TB8+LQ71XBxH4xKGL/TfEkTuXh29dGhhG/L/3DQz3Dd4cefhYkPbiJBbjkqRKUooQTdpPHkgpWZYJkRSqcJVQJlNGGSOMEwpn8cT+gcIi0R/Ck7XtBx/Do+vR0c+7jz59vxuK3AtFbq/ufEgQnfOtSJQpNMHVXYVRQoisUMoOiKwlU4iFle2fsxs7cxvbs+ubgVD4xeqXV2vhl6Gv76Oxrfjv8LfNvfgvSaYJhaa7wadQrmoAIxBSmqZrKorojOoy0QnRZVmnFCX2iIIMiciMq5xxBf1nkKqWPARTVVOYquv602fPHY2NzS0tza6W9o4z7R0d3m5vr8/X09PT2tra1OR0uVxtbW1vl5aQDIo0GD/KOPZ+v18QhIKCgsLCwtLS0rKysuLiYovZbC0vxyGuTCaT2WyenplBMnrJAU9MTCKjpKQEGIArKiqMRoPFYqmpqQERrqqrqysrK+fm508Aj49PIANlhSM7lTGcgAJl7XZ7fX19cHExL7ioqAgAIdeMRmNVVRWUe73epeXlEzRnwegWTRoMBrBkpYILWoAURdHhcCwEg3kr22y22tpa6LRarX9bAFddXV1DQwN4X79ZyDswQ8bQZ7YyDBTYYoSoD/HB4Emax8b8xwZ2zLIqAlPTOWBE2AcCU06ns6ur2+PxuOFud2cnHIs7feL2nE2/ltPL71b+DYwylXHgtey742qOq3Dt0Hnm9ig5SWT6Bw7SHh0XpKYXAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/d24885c06765ba8a0a9908fc0b456e0d/51a8e/Selection_033.webp 340w,\n/static/d24885c06765ba8a0a9908fc0b456e0d/713b7/Selection_033.webp 680w,\n/static/d24885c06765ba8a0a9908fc0b456e0d/f57cc/Selection_033.webp 759w\"\n          sizes=\"(max-width: 759px) 100vw, 759px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/d24885c06765ba8a0a9908fc0b456e0d/ad208/Selection_033.png 340w,\n/static/d24885c06765ba8a0a9908fc0b456e0d/a5a26/Selection_033.png 680w,\n/static/d24885c06765ba8a0a9908fc0b456e0d/710d1/Selection_033.png 759w\"\n          sizes=\"(max-width: 759px) 100vw, 759px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/d24885c06765ba8a0a9908fc0b456e0d/710d1/Selection_033.png\"\n          alt=\"Selection 033\"\n          title=\"\"\n          src=\"/static/d24885c06765ba8a0a9908fc0b456e0d/710d1/Selection_033.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    </p>","frontmatter":{"title":"Setting up Realsense R200 on Odroid XU4 with ROS","tags":["3D","LINUX","ODROID XU4","REALSENSE","robot","ROS","SLAM"],"date":"November 01, 2017","description":null,"thumbnail":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAABAAF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAwAB/9oADAMBAAIQAxAAAAEjc5oKaVZf/8QAGhAAAwADAQAAAAAAAAAAAAAAAQIRAAMSE//aAAgBAQABBQL0IOja5Z9PDQ2xe7n/xAAXEQEAAwAAAAAAAAAAAAAAAAAAARES/9oACAEDAQE/Aall/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAS/9oACAECAQE/AVC23//EABwQAAICAgMAAAAAAAAAAAAAAAABESEDEiJxof/aAAgBAQAGPwLj6XrHRCyNIoSKUn//xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhUTFx/9oACAEBAAE/IREBnERH02l76IBFU12C4BL7pdn/2gAMAwEAAgADAAAAECMv/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERMf/aAAgBAwEBPxCjdwg//8QAGREAAgMBAAAAAAAAAAAAAAAAAAERIVHB/9oACAECAQE/EEChWbcP/8QAGhABAQADAQEAAAAAAAAAAAAAAREAITFxkf/aAAgBAQABPxBRwi0tfPMGEAmnfG7wlgMRSfchwAFu8ENVQ33Wds4Uhn//2Q==","aspectRatio":1.3333333333333333,"src":"/static/69c00ef17e72af93f9ec3e2edd47d444/ac53a/DSC_0321.jpg","srcSet":"/static/69c00ef17e72af93f9ec3e2edd47d444/722c4/DSC_0321.jpg 340w,\n/static/69c00ef17e72af93f9ec3e2edd47d444/1d671/DSC_0321.jpg 680w,\n/static/69c00ef17e72af93f9ec3e2edd47d444/ac53a/DSC_0321.jpg 1360w,\n/static/69c00ef17e72af93f9ec3e2edd47d444/6eda9/DSC_0321.jpg 2040w,\n/static/69c00ef17e72af93f9ec3e2edd47d444/eb7b7/DSC_0321.jpg 2720w,\n/static/69c00ef17e72af93f9ec3e2edd47d444/d46e0/DSC_0321.jpg 4618w","sizes":"(max-width: 1360px) 100vw, 1360px"}}}}}},"pageContext":{"slug":"/2017-11-01-setting-realsense-r200-odroid-xu4-ros/","previous":{"fields":{"slug":"/2017-09-19-539/"},"frontmatter":{"title":"Projects for Maker Faire 2017","tags":["mfr17"]}},"next":{"fields":{"slug":"/2019-09-24-nvidia-jetracer/"},"frontmatter":{"title":"NVidia JetRacer","tags":["robot","JetRacer","Jetson nano","Nvidia","ROS"]}}}},"staticQueryHashes":["63159454"]}